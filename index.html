<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8" />
   <title>New Apple-Style Flip Counter Demo</title>
   <meta name="description" content="A more functional version of my Apple-Style Flip Counter." />
   <meta name="keywords" content="HTML,CSS,JavaScript,counter,apple-style,flip,animate,digit,demo" />
   <meta name="author" content="Chris Nanney" />

</head>

<body>

   <style>
      /*

      Styling the counter itself.
      Set image paths accordingly.

      THIS YOU NEED TO KEEP.

      So you can have multiple counters on a page, just make sure each one has a class of "flip-counter".

      */
      /*=====================================
      =            DO NOT MODIFY            =
      =====================================*/

      .flip-counter ul.cd{float:left;list-style-type:none;margin:0;padding:0}
      .flip-counter li{background:url(digits.png) 0 0 no-repeat}

      .flip-counter li.t{background-position:0 0;width:53px;height:39px}
      .flip-counter li.b{background-position:0 0;width:53px;height:64px}
      .flip-counter li.s{background-position:-53px -1030px;width:14px;height:103px}

      .cf:before,
      .cf:after {
          content: " "; /* 1 */
          display: table; /* 2 */
      }

      .cf:after {
          clear: both;
      }

      /**
       * For IE 6/7 only
       * Include this rule to trigger hasLayout and contain floats.
       */
      .cf {
          *zoom: 1;
      }

      /*-----  End of DO NOT MODIFY  ------*/




      #flipCounterWrapper{
         float: right;
         position: relative;
         left: -50%;
         margin-top: 30px;
      }

      #flipCounter{
         position: relative;
         left: 50%;
         clear: both;
      }
   </style>

   <div id="flipCounterWrapper" class="cf">
      <div id="flipCounter" class="flip-counter"></div>
   </div>


   <script type="text/javascript">var flipCounter=function(e,t){function n(){M=y.value,y.value+=y.inc,g=y.value,o(M,g),y.auto===!0&&(B=setTimeout(n,y.pace))}function i(e,t,n){var a=y.value,u="undefined"==typeof t?!1:t,l="undefined"==typeof n?1:n;u===!0&&l--,a!=e?(M=y.value,y.auto=!0,a+y.inc<=e&&0!=l?a+=y.inc:a=e,y.value=a,g=y.value,o(M,g),B=setTimeout(function(){i(e,u,l)},y.pace)):y.auto=!1}function a(e,t,n){var i=y.value,u="undefined"==typeof t?!1:t,l="undefined"==typeof n?1:n;u===!0&&l--,i!=e?(M=y.value,y.auto=!0,i-y.inc>=e&&0!=l?i-=y.inc:i=e,y.value=i,g=y.value,o(M,g),B=setTimeout(function(){a(e,u,l)},y.pace)):y.auto=!1}function o(e,t){F=l(e),T=l(t);var n,i=F.length,a=T.length;if(a>i)for(n=a-i;n>0;)c(a-n+1,T[a-n]),n--;if(i>a)for(n=i-a;n>0;)r(i-n),n--;for(var o=0;i>o;o++)T[o]!=F[o]&&u(o,F[o],T[o])}function u(e,t,n){function i(){7>l&&(o=3>l?"t":"b",u=h.getElementById(b+"_"+o+"_d"+e),u&&(u.style.backgroundPosition=c[l]),l++,3!=l?setTimeout(i,a):i())}var a,o,u,l=0,c=["-"+y.fW+"px -"+t*y.tFH+"px",-2*y.fW+"px -"+t*y.tFH+"px","0 -"+n*y.tFH+"px","-"+y.fW+"px -"+(t*y.bFH+y.bOffset)+"px",-2*y.fW+"px -"+(n*y.bFH+y.bOffset)+"px",-3*y.fW+"px -"+(n*y.bFH+y.bOffset)+"px","0 -"+(n*y.bFH+y.bOffset)+"px"];if(y.auto===!0&&y.pace<=300)switch(e){case 0:a=y.pace/6;break;case 1:a=y.pace/5;break;case 2:a=y.pace/4;break;case 3:a=y.pace/3;break;default:a=y.pace/1.5}else a=80;a=a>80?80:a,i()}function l(e){return e.toString().split("").reverse()}function c(e,t){var n=Number(e)-1;H=h.createElement("ul"),H.className="cd",H.id=b+"_d"+n,H.innerHTML='<li class="t" id="'+b+"_t_d"+n+'"></li><li class="b" id="'+b+"_b_d"+n+'"></li>',n%3==0&&(x=h.createElement("ul"),x.className="cd",x.innerHTML='<li class="s"></li>',m.insertBefore(x,m.firstChild)),m.insertBefore(H,m.firstChild),h.getElementById(b+"_t_d"+n).style.backgroundPosition="0 -"+t*y.tFH+"px",h.getElementById(b+"_b_d"+n).style.backgroundPosition="0 -"+(t*y.bFH+y.bOffset)+"px"}function r(e){var t=h.getElementById(b+"_d"+e);m.removeChild(t);var n=m.firstChild.firstChild;(" "+n.className+" ").indexOf(" s ")>-1&&(t=n.parentNode,m.removeChild(t))}function f(e){var t,i=e.toString(),a=i.length,o=1;for(t=0;a>t;t++)H=h.createElement("ul"),H.className="cd",H.id=b+"_d"+t,H.innerHTML=H.innerHTML='<li class="t" id="'+b+"_t_d"+t+'"></li><li class="b" id="'+b+"_b_d"+t+'"></li>',m.insertBefore(H,m.firstChild),o!=a&&o%3==0&&(x=h.createElement("ul"),x.className="cd",x.innerHTML='<li class="s"></li>',m.insertBefore(x,m.firstChild)),o++;var u=l(i);for(t=0;a>t;t++)h.getElementById(b+"_t_d"+t).style.backgroundPosition="0 -"+u[t]*y.tFH+"px",h.getElementById(b+"_b_d"+t).style.backgroundPosition="0 -"+(u[t]*y.bFH+y.bOffset)+"px";y.auto===!0&&(B=setTimeout(n,y.pace))}function s(e,t,n,i,a){var o,u={result:!0};u.cond1=e/t>=1?!0:!1,u.cond2=e>=t*n?!0:!1,u.cond3=Math.abs(t*n-e)<=10?!0:!1,u.cond4=Math.abs(t*i-a)<=100?!0:!1,u.cond5=a>=t*i?!0:!1,u.cond1&&u.cond2&&u.cond4&&u.cond5&&(o=Math.abs(e-t*n)+Math.abs(t*i-a),null===E.q&&(E.q=o),o<=E.q&&(E.pace=i,E.inc=n));for(var l=1;5>=l;l++)u["cond"+l]===!1&&(u.result=!1);return u}function d(e){return!isNaN(parseFloat(e))&&isFinite(e)}function p(){clearTimeout(B),B=null}var v={value:0,inc:1,pace:1e3,auto:!0,tFH:39,bFH:64,fW:53,bOffset:390},h=window.document,b="undefined"!=typeof e&&""!==e?e:"flip-counter",m=h.getElementById(b),y={};for(var _ in v)y[_]=_ in t?t[_]:v[_];var M,g,H,x,F=[],T=[],B=null,E={q:null,pace:0,inc:0};this.setValue=function(e){return d(e)&&(M=y.value,g=e,y.value=e,o(M,g)),this},this.setIncrement=function(e){return y.inc=d(e)?e:v.inc,this},this.setPace=function(e){return y.pace=d(e)?e:v.pace,this},this.setAuto=function(e){return e&&!y.auto&&(y.auto=!0,n()),!e&&y.auto&&(B&&p(),y.auto=!1),this},this.step=function(){return y.auto||n(),this},this.add=function(e){return d(e)&&(M=y.value,y.value+=e,g=y.value,o(M,g)),this},this.subtract=function(e){return d(e)&&(M=y.value,y.value-=e,y.value>=0?g=y.value:(g="0",y.value=0),o(M,g)),this},this.incrementTo=function(e,t,n){if(B&&p(),"undefined"!=typeof t){var a,o,u,l=d(t)?1e3*t:1e4,c="undefined"!=typeof n&&d(n)?n:y.pace,r="undefined"!=typeof e&&d(e)?e-y.value:0,f=0;if(E.q=null,c=l/r>c?10*Math.round(l/r/10):c,a=Math.floor(l/c),o=Math.floor(r/a),u=s(r,a,o,c,l),r>0){for(;u.result===!1&&100>f;)c+=10,a=Math.floor(l/c),o=Math.floor(r/a),u=s(r,a,o,c,l),f++;100==f?(y.inc=E.inc,y.pace=E.pace):(y.inc=o,y.pace=c),i(e,!0,a)}}else i(e)},this.decrementTo=function(e,t,n){if(B&&p(),"undefined"!=typeof t){var i,o,u,l=d(t)?1e3*t:1e4,c="undefined"!=typeof n&&d(n)?n:y.pace,r="undefined"!=typeof e&&d(e)?y.value-e:0,f=0;if(E.q=null,c=l/r>c?10*Math.round(l/r/10):c,i=Math.floor(l/c),o=Math.floor(r/i),u=s(r,i,o,c,l),r>0){for(;u.result===!1&&100>f;)c+=10,i=Math.floor(l/c),o=Math.floor(r/i),u=s(r,i,o,c,l),f++;100==f?(y.inc=E.inc,y.pace=E.pace):(y.inc=o,y.pace=c),a(e,!0,i)}}else a(e)},this.getValue=function(){return y.value},this.stop=function(){return B&&p(),this},f(y.value)};</script>
   <script type="text/javascript">

      ///////////////////////////////////////////
      // EDIT THESE VALUES TO MODIFY ANIMATION //
      ///////////////////////////////////////////
      var startValue          = 150000; //The starting value of the counter
      var finalValue          = 1337; //The final value of the counter
      var animationDuration   = 3;     //The total duration of the animation in seconds
      var animationDelay      = 3000;  //The delay before the animation starts in milliseconds (1000 = 1 second);
      
      ////////////////
      //DO NOT EDIT //
      ////////////////
      var myCounter = new flipCounter('flipCounter', {value:startValue, auto:false});
      setTimeout( function(){myCounter.decrementTo(finalValue, animationDuration, 10)}, animationDelay );

   </script>
</body>

</html>
